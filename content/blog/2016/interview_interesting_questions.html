---
title: "the Interview Questions"
created: !!timestamp '2016-03-03 07:40:00'
image: /media/images/blog/2016/questions.jpg
tags:
    - Algorithm
    - Interview
---

{% block excerpt %}
{% mark excerpt %}
Last night I had a interview, and I realized that my ability to coding and some basic knowleges is a little worse than I used to be , 
so I will record all the interview(interesting) questions I have meet.
{% endmark %}
{% endblock %}

#Q1 - the sequence to init the object in java
this is very basic knowledage in java,and I think I am right when I do it in interview ,but I was not very sure about the result at the interview at that time.
the question almost like this , and it ask you what's the output when you run the test.
{% syntax java %}
class Parent {
        protected String name;
        Parent(){
            System.out.println(1);
        }
        Parent(String name) {
            System.out.println(2);
            this.name = name;
        }

    }
    class Child extends  Parent{

        Child() {
            System.out.println(3);
        }

        Child(String name) {
            System.out.println(4);
            Parent p = new Parent("F:" + name);
            this.name = name;
        }

    }
    @Test
    public void testSequenceWhenConstructChildWithParameter(){
        Parent parent = new Child("Test");
    }
{% endsyntax %}
acctually , lets look the Child.class  the java compiled .
{% syntax java %}
Child()
  {
    super();
    System.out.println(3);
  }
  
  Child(String name)
  {
    super();
    System.out.println(4);
    Parent p = new Parent( "F:" + name);
    this.name = name;
  }
{% endsyntax %}

yeah, the first statement in a constructor is the chaining of super class constructor.In fact, the first statement in any constructor chains to the super class constructor , so the result ould be 1 4 2

#Q2 - How to Build a DAMU(弹幕) System
I never thought of this question before , my first idea is to use [websocket](http://www.websocket.org/) as transport,since websocket is the protocol for two-way communication  between web pages and remote host,after the inteview I checked a little more about websocket . web introduces the WebSocket interface and defines a full-duplex communication channel that operates through a single socket over the Web. its a new protocol coming with HTML5.
let's check a simple request message as example 
{% syntax html %}
GET /chat HTTP/1.1
Host: server.example.com
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Key: x3JJHMbDL1EzLkh9GBhXDw==
Sec-WebSocket-Protocol: chat, superchat
Sec-WebSocket-Version: 13
Origin: http://example.com
{% endsyntax %}
and you can see there's something more comparing with normal http request. `Upgrade: websocket`,`Connection: Upgrade` , this will tell the server 
that the client expect a websocket protocol.
`Sec-WebSocket-Key` is a Base64 encoded string , its generated by client side.
`Sec_WebSocket-Protocol` is defined by user , it can differ different service under same URL
the response message sent by sever is like below
{% syntax html %}
HTTP/1.1 101 Switching Protocols
Upgrade: websocket
Connection: Upgrade
Sec-WebSocket-Accept: HSmrc0sMlYUkAGmm5OPpG2HaGWk=
Sec-WebSocket-Protocol: chat
{% endsyntax %}
`Upgrade: websocket` means server already switched from HTML to websocket and 
`Sec-WebSocket-Accept` is encryption of `Sec-WebSocket-Key` 
and now the HTTP has done its job,websocket will take the part.
and the below is the basic implementing in js
{% syntax javascript %}
var myWebSocket = new WebSocket("ws://www.websockets.org");
myWebSocket.onopen = function(evt) { alert("Connection open ..."); };
myWebSocket.onmessage = function(evt) { alert( "Received Message: " + evt.data); };
myWebSocket.onclose = function(evt) { alert("Connection closed."); };  
myWebSocket.send("Hello WebSockets!");
myWebSocket.close();
{% endsyntax %}









